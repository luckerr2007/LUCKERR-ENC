# LUCKERR v4.0 - 专业文件加密工具

## 📖 项目简介

LUCKERR 是一个专业的文件加密解密工具，采用军用级加密算法，为用户提供安全可靠的文件保护解决方案。本项目采用 **Rust** 作为核心加密引擎，**Python** 作为用户界面开发语言，结合现代化的终端用户界面(TUI)设计，提供了强大而易用的文件加密体验。

### 🛠️ 技术栈

- **核心引擎**: Rust - 高性能、内存安全的系统编程语言
- **加密算法**: XChaCha20-Poly1305 (AEAD) + Argon2id (密钥派生) + Blake3 (完整性校验)
- **用户界面**: Python + Textual - 现代化终端用户界面
- **构建系统**: Cargo (Rust) + Python 脚本自动化
- **平台支持**: Windows (主要)，跨平台兼容

### ✨ 核心特性

- 🔐 **军用级加密**: XChaCha20-Poly1305 AEAD 算法，NSA推荐标准
- 🚀 **高性能处理**: Rust引擎，支持大文件快速加密
- 🎨 **现代化界面**: Python Textual TUI，支持全屏和响应式布局
- 🔑 **智能密钥管理**: 自动生成、设备绑定、密钥嵌入
- 🛡️ **安全增强**: 系统环境检测、反调试、安全评分
- 📁 **批量处理**: 支持单文件和目录批量加密
- 🔄 **就地加密**: 安全覆盖原文件，节省存储空间
- 📊 **详细日志**: 完整的操作记录和调试信息

## 🚀 快速开始

### 环境要求

- **Windows 10/11** (推荐)
- **Python 3.8+** (用于TUI界面)
- **Rust 1.70+** (用于构建核心引擎)
- **PowerShell 5.0+** (Windows自带)

### 📦 安装与构建

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd jiami
   ```

2. **安装Python依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **构建Rust核心引擎**
   ```bash
   python scripts/luckerr.py build
   ```

4. **启动TUI界面**
   ```bash
   python scripts/luckerr.py run
   # 或者直接运行
   python scripts/luckerr.py
   ```

## 💻 使用指南

### TUI界面操作

启动后将看到统一的TUI界面，包含以下功能模块：

```
┌─ LUCKERR v4.0 - 统一 TUI 界面 ─────────────────────────────────┐
│                                                               │
│ ┌─主控制────┐ ┌─执行结果─────────────────────────────────────┐ │
│ │1) 单文件加密│ │欢迎使用 LUCKERR 统一 TUI 界面              │ │
│ │2) 单文件解密│ │文本显示问题已修复，支持完整中文显示          │ │
│ │3) 批量加密 │ │集成所有功能：文件选择、批量处理、任务历史    │ │
│ │4) 批量解密 │ │使用 Tab 键切换标签页，F11 全屏切换         │ │
│ │5) 系统状态 │ └───────────────────────────────────────────┘ │
│ │6) 安全体检 │ ┌─执行日志─────────────────────────────────────┐ │
│ │7) 重置系统 │ │统一 TUI 启动完成                          │ │
│ │8) 版本信息 │ │文本显示已优化，支持中文和Unicode字符        │ │
│ │9) 帮助信息 │ │完整显示模式：保留所有可读字符              │ │
│ │F) 选择文件 │ └───────────────────────────────────────────┘ │
│ │S) 设置配置 │                                             │
│ │0) 退出程序 │                                             │
│ └───────────┘                                             │
└───────────────────────────────────────────────────────────────┘
```

### 📋 主要功能说明

#### 1. 单文件加密/解密
- 选择 `1` 或 `2` 进行单文件操作
- 使用 `F` 键打开文件选择对话框
- 支持拖拽文件到TUI界面

#### 2. 批量处理
- 选择 `3` 或 `4` 进行目录批量操作
- 自动递归处理子目录文件
- 显示处理进度和统计信息

#### 3. 系统功能
- `5` 系统状态：显示系统信息和加密统计
- `6` 安全体检：检测系统安全性和环境威胁
- `7` 重置系统：清理配置和临时文件

#### 4. 配置管理
- `S` 设置配置：自定义界面主题、布局、编码等
- `8` 版本信息：显示程序版本和组件信息
- `9` 帮助信息：查看完整使用帮助

### ⌨️ 快捷键说明

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Q` / `ESC` / `Ctrl+C` | 退出程序 | 安全退出应用 |
| `R` | 刷新界面 | 重新加载界面内容 |
| `C` | 清空日志 | 清除执行结果和日志 |
| `F` | 选择文件 | 打开文件选择对话框 |
| `Ctrl+S` | 打开设置 | 配置界面和行为选项 |
| `Ctrl+T` | 切换主题 | 在深色/浅色主题间切换 |
| `Tab` / `Shift+Tab` | 切换标签页 | 在不同功能模块间导航 |
| `F11` | 全屏切换 | 进入/退出全屏模式 |
| `Ctrl+Shift+R` | 强制刷新 | 解决界面显示问题 |
| `Ctrl+H` | 显示帮助 | 查看详细帮助信息 |
| `Ctrl+R` | 重载配置 | 重新加载配置文件 |
| `Ctrl+L` | 打开日志 | 查看详细调试日志 |

### 📁 标签页功能

#### 主控制
- 核心加密解密操作
- 菜单选择和执行
- 实时结果显示

#### 文件浏览
- 图形化文件选择器
- 支持目录导航
- 文件类型图标显示

#### 任务历史
- 查看所有操作记录
- 任务状态和结果
- 时间戳和详细信息

#### 帮助
- 完整功能说明
- 快捷键参考
- 故障排除指南

## 🔧 命令行接口

除了TUI界面，LUCKERR也支持命令行操作：

```bash
# 构建项目
python scripts/luckerr.py build

# 启动TUI界面
python scripts/luckerr.py run
python scripts/luckerr.py tui

# 直接加密文件
python scripts/luckerr.py encrypt <文件路径>

# 直接解密文件
python scripts/luckerr.py decrypt <文件路径>

# 查看系统状态
python scripts/luckerr.py status

# 安全体检
python scripts/luckerr.py doctor

# 重置系统
python scripts/luckerr.py reset

# 查看版本信息
python scripts/luckerr.py version

# 显示帮助
python scripts/luckerr.py help
```

## ⚙️ 配置选项

TUI界面支持丰富的自定义配置，通过 `Ctrl+S` 或菜单选择 `S` 进入设置：

### 界面配置
- **主题**: 深色主题 / 浅色主题
- **布局**: 紧凑 / 标准 / 宽松
- **文件显示**: ASCII模式 / 简洁模式
- **编码**: UTF-8 / ASCII安全

### 功能选项
- **调试模式**: 启用详细调试信息
- **自动刷新**: 自动更新界面内容
- **进度条**: 显示操作进度
- **提示音**: 操作完成提示
- **安全模式**: 过滤特殊字符显示

### 日志配置
- **详细**: 显示所有调试信息
- **标准**: 显示重要操作信息
- **简洁**: 仅显示关键结果

## 🔐 加密技术详解

### 算法组合
- **XChaCha20-Poly1305**: 认证加密算法，提供机密性和完整性
- **Argon2id**: 密钥派生函数，抗彩虹表和时序攻击
- **Blake3**: 高速哈希算法，用于完整性校验

### 安全特性
- **设备指纹绑定**: 密钥与设备硬件特征绑定
- **密钥嵌入**: 加密后的密钥嵌入文件，支持自动解密
- **就地加密**: 安全覆盖原文件，防止数据恢复
- **反调试保护**: 检测调试器和虚拟机环境

### 文件格式
```
加密文件结构：
┌─ 文件头 (LUCKRCLI) ─┐
├─ 版本信息          │
├─ 时间戳            │
├─ 原文件大小        │
├─ 块大小信息        │
├─ 嵌入密钥 (可选)   │
├─ 加密数据块        │
├─ 认证标签          │
└─ 完整性哈希        ┘
```

## 🛠️ 开发说明

### 项目结构
```
jiami/
├── src-tauri/          # Rust核心引擎
│   ├── src/
│   │   ├── main.rs     # 主程序入口
│   │   ├── crypto.rs   # 加密算法实现
│   │   ├── encryption.rs # 文件加密逻辑
│   │   ├── auto_auth.rs # 自动认证
│   │   ├── system.rs   # 系统检测
│   │   └── ui.rs       # CLI界面
│   └── Cargo.toml      # Rust依赖配置
├── ui/                 # Python TUI界面
│   └── textual_app.py  # Textual应用主文件
├── scripts/            # 构建和启动脚本
│   └── luckerr.py      # 主控制脚本
├── requirements.txt    # Python依赖
├── tui_config.json     # TUI配置文件
├── tui_debug.log       # 调试日志
└── README.md           # 项目说明
```

### 构建流程
1. Cargo构建Rust核心引擎 (`luckerr.exe`)
2. Python脚本管理项目生命周期
3. Textual框架提供现代化TUI界面
4. 配置文件持久化用户偏好

## 🐛 故障排除

### 常见问题

**Q: TUI界面显示花屏或乱码**
A: 使用 `F11` 全屏切换或 `Ctrl+Shift+R` 强制刷新界面

**Q: 文件加密后无法解密**
A: 检查文件扩展名是否为 `.luckerr`，确保在相同设备上解密

**Q: 程序启动失败**
A: 确保已安装Python 3.8+和必要依赖，运行 `pip install -r requirements.txt`

**Q: 构建错误**
A: 确保已安装Rust工具链，运行 `python scripts/luckerr.py build` 重新构建

### 调试信息
- 查看 `tui_debug.log` 文件获取详细错误信息
- 使用 `Ctrl+L` 在TUI中直接打开日志文件
- 启用调试模式获取更多运行时信息

### 性能优化
- 对于大文件，使用批量处理模式
- 关闭不必要的安全检测以提升速度
- 在SSD硬盘上操作以获得最佳性能

## 📄 许可证

本项目采用开源许可证，详见LICENSE文件。

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进本项目：

1. Fork本仓库
2. 创建功能分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 创建Pull Request

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 提交Issue到GitHub仓库
- 查看调试日志 `tui_debug.log`
- 使用TUI内置帮助系统 (`Ctrl+H`)

---

**LUCKERR v4.0** - 让文件加密变得简单而安全 🔐
